<?php

namespace Database\Seeders;

use App\Models\CommentPost;
use App\Models\Post;
use App\Models\User;
use Illuminate\Database\Seeder;

class CommentPostSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // ุงูุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช
        if (User::count() === 0) {
            $this->command->warn('โ๏ธ ูุง ููุฌุฏ ูุณุชุฎุฏููู! ุณูุชู ุฅูุดุงุก ูุณุชุฎุฏููู...');
            $this->call(UserSeeder::class);
        }

        if (Post::count() === 0) {
            $this->command->warn('โ๏ธ ูุง ููุฌุฏ ููุงูุงุช! ุณูุชู ุฅูุดุงุก ููุงูุงุช...');
            $this->call(PostSeeder::class);
        }

        $users = User::where('admin_level', 0)->get();
        $posts = Post::all();

        if ($users->count() === 0 || $posts->count() === 0) {
            $this->command->error('โ ูุง ูููู ุฅูุดุงุก ุชุนูููุงุช ุจุฏูู ูุณุชุฎุฏููู ูููุงูุงุช!');

            return;
        }

        // ==================== ุงูุชุนูููุงุช ุงูุซุงุจุชุฉ ====================
        $comments = [
            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุฃููู (Python)
            [
                'post_id' => $posts[0]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ููุงูุฉ ุฑุงุฆุนุฉ! ุณุงุนุฏุชูู ูุซูุฑุงู ูู ููู ุฃุณุงุณูุงุช Python. ุดูุฑุงู ูููุคูู!',
            ],
            [
                'post_id' => $posts[0]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ูู ูููู ุชูุถูุญ ุงููุฑู ุจูู ุงูููุงุฆู ูุงูููุงููุณ ูู Pythonุ',
            ],
            [
                'post_id' => $posts[0]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐู ุงูููุงูุฉ. ุฃุชููู ุงููุฒูุฏ ูู ุงูููุงูุงุช ุนู ุงูุจุฑูุฌุฉ!',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุซุงููุฉ (ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ)
            [
                'post_id' => $posts[1]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ูุนูููุงุช ูููุฉ ุฌุฏุงู! ุจุฏุฃุช ุชุทุจูู ูุฐู ุงูุงุณุชุฑุงุชูุฌูุงุช ูู ูุชุฌุฑู ููุงุญุธุช ุชุญุณูุงู ููุญูุธุงู.',
            ],
            [
                'post_id' => $posts[1]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ุดูุฑุงู ุนูู ูุฐู ุงููุตุงุฆุญ ุงูููุชุงุฒุฉ. ูู ูุฏูู ุชูุตูุงุช ูุฃุฏูุงุช ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉุ',
            ],
            [
                'post_id' => $posts[1]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ููุงูุฉ ุดุงููุฉ ููููุฏุฉ. ุฃุชููู ุงููุฒูุฏ ูู ุงูููุงูุงุช ูู ูุฐุง ุงููุฌุงู!',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุซุงูุซุฉ (ุงูุฐูุงุก ุงูุงุตุทูุงุนู)
            [
                'post_id' => $posts[2]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ููุฏูุฉ ููุชุงุฒุฉ ููุฐูุงุก ุงูุงุตุทูุงุนู! ูู ูููู ุงูุชูุตูุฉ ุจุจุนุถ ุงููุชุจ ูููุจุชุฏุฆููุ',
            ],
            [
                'post_id' => $posts[2]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ููุงูุฉ ุฑุงุฆุนุฉ ูููุตูุฉ. ุงุณุชูุฏุช ูุซูุฑุงู ูู ุงููุนูููุงุช ุงูููุฏูุฉ.',
            ],
            [
                'post_id' => $posts[2]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ูู ุชุนุชูุฏ ุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุณูุญู ูุญู ุงููุธุงุฆู ุงูุจุดุฑูุฉ ูู ุงููุณุชูุจูุ',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุฑุงุจุนุฉ (ุงูุชุตููู ุงูุฌุฑุงูููู)
            [
                'post_id' => $posts[3]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ุฃุฏูุงุช ุฑุงุฆุนุฉ! ุฃูุง ุดุฎุตูุงู ุฃูุถู ุงุณุชุฎุฏุงู Figma ูุณูููุชู ููุฑููุชู.',
            ],
            [
                'post_id' => $posts[3]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ุดูุฑุงู ุนูู ูุฐู ุงููุงุฆูุฉ ุงูุดุงููุฉ. ุณุฃุฌุฑุจ ุจุนุถ ูุฐู ุงูุฃุฏูุงุช ุงูุฌุฏูุฏุฉ.',
            ],
            [
                'post_id' => $posts[3]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ููุงูุฉ ููุชุงุฒุฉ ูููุตูููู ุงููุจุชุฏุฆูู. ูู ูุฏูู ุฏูุฑุงุช ูู ุงูุชุตูููุ',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุฎุงูุณุฉ (ุงูุฃูู ุงูุณูุจุฑุงูู)
            [
                'post_id' => $posts[4]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ูุตุงุฆุญ ุฃูููุฉ ูููุฉ ุฌุฏุงู! ุจุฏุฃุช ุจุชุทุจูููุง ููุฑุงู ุนูู ูููุนู.',
            ],
            [
                'post_id' => $posts[4]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ูู ููููู ุชูุถูุญ ุงููุฒูุฏ ุนู ุฌุฏุงุฑ ุงูุญูุงูุฉ ูููููุฉ ุฅุนุฏุงุฏู ุจุดูู ุตุญูุญุ',
            ],
            [
                'post_id' => $posts[4]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ููุงูุฉ ูููุฉ ุฌุฏุงู ูู ููุชูุง ุงูุญุงูู. ุดูุฑุงู ุนูู ุงูุชูุนูุฉ!',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุณุงุฏุณุฉ (ุชุนูู ุงูุจุฑูุฌุฉ)
            [
                'post_id' => $posts[5]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ูุตุงุฆุญ ุฑุงุฆุนุฉ ูููุจุชุฏุฆูู! ุจุฏุฃุช ุฑุญูุชู ูู ุงูุจุฑูุฌุฉ ูุฃุฌุฏ ูุฐู ุงููุตุงุฆุญ ูููุฏุฉ ุฌุฏุงู.',
            ],
            [
                'post_id' => $posts[5]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ูุง ูู ุฃูุถู ุทุฑููุฉ ูุจูุงุก ูุญูุธุฉ ุฃุนูุงู ูููุจุฑูุฌ ุงููุจุชุฏุฆุ',
            ],
            [
                'post_id' => $posts[5]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ููุงูุฉ ููุชุงุฒุฉ ูููุตูุฉ. ุดูุฑุงู ุนูู ุงููุฌููุฏ ุงูุฑุงุฆุน!',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุณุงุจุนุฉ (ุงูุชุณููู ุจุงููุญุชูู)
            [
                'post_id' => $posts[6]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ุงุณุชุฑุงุชูุฌูุงุช ููุชุงุฒุฉ! ุจุฏุฃุช ุชุทุจูููุง ููุงุญุธุช ุฒูุงุฏุฉ ูู ุงูุชูุงุนู.',
            ],
            [
                'post_id' => $posts[6]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ูู ููููู ุชูุถูุญ ููููุฉ ููุงุณ ูุฌุงุญ ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุณููู ุจุงููุญุชููุ',
            ],
            [
                'post_id' => $posts[6]->id,
                'user_id' => $users[0]->id,
                'comment' => 'ููุงูุฉ ุดุงููุฉ ููููุฏุฉ ุฌุฏุงู. ุดูุฑุงู ูููุคูู!',
            ],

            // ุชุนูููุงุช ุนูู ุงูููุงูุฉ ุงูุซุงููุฉ (ุชุทููุฑ ุงูุชุทุจููุงุช)
            [
                'post_id' => $posts[7]->id,
                'user_id' => $users[1]->id,
                'comment' => 'ููุฏูุฉ ููุชุงุฒุฉ ูุชุทููุฑ ุงูุชุทุจููุงุช! ูู ุชูุถู React Native ุฃู Flutterุ',
            ],
            [
                'post_id' => $posts[7]->id,
                'user_id' => $users[2]->id,
                'comment' => 'ุดูุฑุงู ุนูู ูุฐู ุงููุนูููุงุช ุงููููุฉ. ุฃุฎุทุท ูุจุฏุก ุชุทููุฑ ุชุทุจููู ุงูุฃูู.',
            ],
            [
                'post_id' => $posts[7]->id,
                'user_id' => $users[3]->id,
                'comment' => 'ููุงูุฉ ุฑุงุฆุนุฉ ูููุจุชุฏุฆูู ูู ุชุทููุฑ ุงูุชุทุจููุงุช. ุดูุฑุงู!',
            ],
        ];

        // ุฅูุดุงุก ุงูุชุนูููุงุช ุงูุซุงุจุชุฉ
        foreach ($comments as $commentData) {
            CommentPost::create($commentData);
        }

        $this->command->info('โ ุชู ุฅูุดุงุก '.count($comments).' ุชุนููู ุซุงุจุช.');

        // ==================== ุชุนูููุงุช ุนุดูุงุฆูุฉ ====================
        $randomCommentsCount = 30;
        $randomComments = [];

        for ($i = 0; $i < $randomCommentsCount; $i++) {
            $randomComments[] = [
                'post_id' => $posts->random()->id,
                'user_id' => $users->random()->id,
                'comment' => $this->getRandomComment(),
                'created_at' => now()->subDays(rand(0, 60)),
                'updated_at' => now()->subDays(rand(0, 60)),
            ];
        }

        // ุฅูุดุงุก ุงูุชุนูููุงุช ุงูุนุดูุงุฆูุฉ
        foreach ($randomComments as $commentData) {
            CommentPost::create($commentData);
        }

        $this->command->info('โ ุชู ุฅูุดุงุก '.$randomCommentsCount.' ุชุนููู ุนุดูุงุฆู.');

        // ==================== ุฅุญุตุงุฆูุงุช ====================
        $total = CommentPost::count();
        $byPost = [];
        foreach ($posts as $post) {
            $count = CommentPost::where('post_id', $post->id)->count();
            if ($count > 0) {
                $byPost[$post->title] = $count;
            }
        }

        $this->command->info('๐ ุฅุญุตุงุฆูุงุช ุชุนูููุงุช ุงููุฏููุฉ:');
        $this->command->info("   - ุงููุฌููุน: {$total}");
        $this->command->info('   - ุชูุฒูุน ุงูุชุนูููุงุช ุนูู ุงูููุงูุงุช:');
        foreach ($byPost as $postTitle => $count) {
            $this->command->info('     โข '.substr($postTitle, 0, 40)."...: {$count}");
        }
    }

    /**
     * ุงูุญุตูู ุนูู ุชุนููู ุนุดูุงุฆู
     */
    private function getRandomComment(): string
    {
        $comments = [
            'ููุงูุฉ ููุชุงุฒุฉ ููููุฏุฉ ุฌุฏุงู. ุดูุฑุงู ูููุคูู!',
            'ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐู ุงููุนูููุงุช. ุดูุฑุงู ุฌุฒููุงู!',
            'ูุญุชูู ููู ูููุชุงุฒ. ุฃุชููู ุงููุฒูุฏ ูู ุงูููุงูุงุช ูุซู ูุฐู.',
            'ุดุฑุญ ููุตู ูููุชุงุฒ. ุดูุฑุงู ุนูู ุงููุฌููุฏ!',
            'ูุนูููุงุช ุฌุฏูุฏุฉ ููููุฏุฉ. ุดูุฑุงู ูููุดุงุฑูุฉ!',
            'ุฃุญุณูุช! ููุงูุฉ ุฑุงุฆุนุฉ ููููุฏุฉ.',
            'ุดูุฑุงู ุนูู ูุฐุง ุงููุญุชูู ุงูููู.',
            'ููุชุงุฒ! ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐู ุงููุนูููุงุช.',
            'ููุงูุฉ ููุชุงุฒุฉ ููููุฏุฉ ุฌุฏุงู.',
            'ุฃุญุจุจุช ูุฐุง ุงูููุงู ูุซูุฑุงู. ุดูุฑุงู!',
            'ููุงูุฉ ุดุงููุฉ ููููุฏุฉ. ุฃุชููู ุงููุฒูุฏ!',
            'ุดูุฑุงู ุนูู ูุฐู ุงููุตุงุฆุญ ุงูููุชุงุฒุฉ.',
            'ููุงูุฉ ูููุฉ ุฌุฏุงู ูู ููุชูุง ุงูุญุงูู.',
            'ููุฏูุฉ ููุชุงุฒุฉ! ุดูุฑุงู ูููุคูู.',
            'ููุงูุฉ ุฑุงุฆุนุฉ ูููุจุชุฏุฆูู. ุดูุฑุงู!',
            'ุงุณุชุฑุงุชูุฌูุงุช ููุชุงุฒุฉ! ุดูุฑุงู ูููุดุงุฑูุฉ.',
            'ูุตุงุฆุญ ูููุฉ ุฌุฏุงู! ุดูุฑุงู ุนูู ุงูุชูุนูุฉ.',
            'ููุงูุฉ ููุตูุฉ ูููุชุงุฒุฉ. ุดูุฑุงู!',
            'ูุญุชูู ููุชุงุฒ ููููุฏ. ุฃุชููู ุงููุฒูุฏ!',
            'ุดูุฑุงู ุนูู ูุฐู ุงููุนูููุงุช ุงููููุฉ.',
            'ููุงูุฉ ุฑุงุฆุนุฉ! ุงุณุชูุฏุช ูุซูุฑุงู.',
            'ููุชุงุฒ! ุฃุชููู ุงููุฒูุฏ ูู ุงูููุงูุงุช.',
            'ููุงูุฉ ูููุฏุฉ ุฌุฏุงู. ุดูุฑุงู ูููุคูู!',
            'ูุญุชูู ููู ูููุชุงุฒ. ุดูุฑุงู!',
            'ููุงูุฉ ุดุงููุฉ ูููุตูุฉ. ุดูุฑุงู!',
            'ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐู ุงูููุงูุฉ.',
            'ููุงูุฉ ุฑุงุฆุนุฉ ููููุฏุฉ. ุดูุฑุงู!',
            'ููุชุงุฒ! ููุงูุฉ ูููุฏุฉ ุฌุฏุงู.',
            'ุดูุฑุงู ุนูู ูุฐุง ุงููุญุชูู ุงูููุชุงุฒ.',
            'ููุงูุฉ ูููุฉ ุฌุฏุงู. ุดูุฑุงู ูููุดุงุฑูุฉ!',
        ];

        $questions = [
            'ุดูุฑุงู ุนูู ุงูููุงูุฉ ุงููููุฏุฉ. ูุฏู ุณุคุงู ุจุฎุตูุต...',
            'ููุงูุฉ ููุชุงุฒุฉ! ูู ูููู ุชูุถูุญ ูุฐู ุงูููุทุฉ ุฃูุซุฑุ',
            'ูู ููููู ูุดุงุฑูุฉ ุงููุฒูุฏ ูู ุงููุตุงุฏุฑ ุญูู ูุฐุง ุงูููุถูุนุ',
            'ูุง ูู ุฑุฃูู ูู...ุ',
            'ูู ุฌุฑุจุช ูุฐู ุงูุทุฑููุฉ ูู ูุดุงุฑูุน ุญููููุฉุ',
            'ููู ูููู ุชุทุจูู ูุฐู ุงูุงุณุชุฑุงุชูุฌูุฉ ูู ุงููุดุงุฑูุน ุงูุตุบูุฑุฉุ',
            'ูุง ูู ุฃูุถู ุงูุฃุฏูุงุช ุงูุชู ุชูุตุญ ุจุงุณุชุฎุฏุงููุงุ',
            'ูู ูุฏูู ุชูุตูุงุช ุฅุถุงููุฉ ุญูู ูุฐุง ุงูููุถูุนุ',
            'ููู ูููููู ุงูุจุฏุก ูู ุชุนูู ูุฐุง ุงููุฌุงูุ',
            'ูุง ูู ุงูุชุญุฏูุงุช ุงูุชู ูุฏ ุฃูุงุฌููุงุ',
            'ูู ููููู ุชูุถูุญ ุงููุฒูุฏ ุนู ูุฐู ุงูููุทุฉุ',
            'ูุง ูู ุฃูุถู ูุตุฏุฑ ูุชุนูู ุงููุฒูุฏุ',
            'ููู ูููู ููุงุณ ูุฌุงุญ ูุฐู ุงูุงุณุชุฑุงุชูุฌูุฉุ',
            'ูู ููุงู ุจุฏุงุฆู ุฃุฎุฑู ููุฐู ุงูุฃุฏุงุฉุ',
            'ูุง ูู ุฃูุถู ุงูููุงุฑุณุงุช ูู ูุฐุง ุงููุฌุงูุ',
        ];

        // 70% ุชุนูููุงุช ุฅูุฌุงุจูุฉุ 30% ุฃุณุฆูุฉ
        $type = rand(1, 10);
        if ($type <= 7) {
            return $comments[array_rand($comments)];
        } else {
            return $questions[array_rand($questions)];
        }
    }
}
